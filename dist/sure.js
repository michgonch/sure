"use strict";var state={PANDING:"PANDING",FULFILLED:"FULFILLED",REJECTED:"REJECTED"};class Sure{constructor(t){if("function"!=typeof t)throw new Error("Executor must be a function");this.state=state.PANDING,this.chained=[];const e=t=>{if(this.state===state.PANDING){if(t&&"function"==typeof t.then)return t.then(e,s);this.state=state.FULFILLED,this.finalValue=t;for(const{onFulfilled:e}of this.chained)e(t);return t}},s=t=>{if(this.state===state.PANDING){this.state=state.REJECTED,this.finalValue=t;for(const{onRejected:t}of this.chained)t(err)}};try{t(e,s)}catch(t){s(t)}}then(t,e){return new Sure((s,a)=>{const i=e=>{try{s(t(e))}catch(t){a(t)}},n=t=>{try{a(e(t))}catch(t){a(t)}};this.state===state.FULFILLED?i(this.finalValue):this.state===state.REJECTED?n(this.finalValue):this.chained.push({onFulfilled:i,onRejected:n})})}}module.exports=Sure;
